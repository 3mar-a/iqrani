{"ast":null,"code":"import _objectSpread from\"C:/Users/Omar/Desktop/hgfjhgblknm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Dialog,DialogTitle,DialogContent,DialogActions,TextField,Button,FormControl,InputLabel,Select,MenuItem,Box}from'@mui/material';import api from'../../config/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddBookForm=_ref=>{let{open,onClose,onSuccess}=_ref;const[formData,setFormData]=useState({title:'',description:'',price:'',category:'',pdf:null,cover:null});const[error,setError]=useState('');const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleFileChange=e=>{const{name,files}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:files[0]}));};const handleSubmit=async e=>{e.preventDefault();try{const formDataToSend=new FormData();Object.keys(formData).forEach(key=>{formDataToSend.append(key,formData[key]);});await api.post('/books/upload',formDataToSend,{headers:{'Content-Type':'multipart/form-data'}});onSuccess();}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'حدث خطأ في رفع الكتاب');}};return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:onClose,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0643\\u062A\\u0627\\u0628 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0643\\u062A\\u0627\\u0628\",name:\"title\",value:formData.title,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0643\\u062A\\u0627\\u0628\",name:\"description\",value:formData.description,onChange:handleChange,margin:\"normal\",multiline:true,rows:4,required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"\\u0627\\u0644\\u0633\\u0639\\u0631\",name:\"price\",type:\"number\",value:formData.price,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"\\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0641\"}),/*#__PURE__*/_jsxs(Select,{name:\"category\",value:formData.category,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"educational\",children:\"\\u062A\\u0639\\u0644\\u064A\\u0645\\u064A\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"historical\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E\\u064A\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"cultural\",children:\"\\u062B\\u0642\\u0627\\u0641\\u064A\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"novel\",children:\"\\u0631\\u0648\\u0627\\u064A\\u0629\"})]})]}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsx(\"input\",{accept:\"application/pdf\",type:\"file\",name:\"pdf\",onChange:handleFileChange,required:true})}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsx(\"input\",{accept:\"image/*\",type:\"file\",name:\"cover\",onChange:handleFileChange,required:true})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",children:\"\\u0631\\u0641\\u0639 \\u0627\\u0644\\u0643\\u062A\\u0627\\u0628\"})]})]})]});};export default AddBookForm;","map":{"version":3,"names":["React","useState","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Button","FormControl","InputLabel","Select","MenuItem","Box","api","jsx","_jsx","jsxs","_jsxs","AddBookForm","_ref","open","onClose","onSuccess","formData","setFormData","title","description","price","category","pdf","cover","error","setError","handleChange","e","name","value","target","prev","_objectSpread","handleFileChange","files","handleSubmit","preventDefault","formDataToSend","FormData","Object","keys","forEach","key","append","post","headers","_error$response","_error$response$data","response","data","message","maxWidth","fullWidth","children","onSubmit","label","onChange","margin","required","multiline","rows","type","sx","mt","accept","onClick","variant"],"sources":["C:/Users/Omar/Desktop/hgfjhgblknm/frontend/src/components/Author/AddBookForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Button,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Box\r\n} from '@mui/material';\r\nimport api from '../../config/api';\r\n\r\nconst AddBookForm = ({ open, onClose, onSuccess }) => {\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    price: '',\r\n    category: '',\r\n    pdf: null,\r\n    cover: null\r\n  });\r\n  const [error, setError] = useState('');\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const { name, files } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: files[0]\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const formDataToSend = new FormData();\r\n      Object.keys(formData).forEach(key => {\r\n        formDataToSend.append(key, formData[key]);\r\n      });\r\n\r\n      await api.post('/books/upload', formDataToSend, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n\r\n      onSuccess();\r\n    } catch (error) {\r\n      setError(error.response?.data?.message || 'حدث خطأ في رفع الكتاب');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\r\n      <DialogTitle>إضافة كتاب جديد</DialogTitle>\r\n      <form onSubmit={handleSubmit}>\r\n        <DialogContent>\r\n          <TextField\r\n            fullWidth\r\n            label=\"عنوان الكتاب\"\r\n            name=\"title\"\r\n            value={formData.title}\r\n            onChange={handleChange}\r\n            margin=\"normal\"\r\n            required\r\n          />\r\n          <TextField\r\n            fullWidth\r\n            label=\"وصف الكتاب\"\r\n            name=\"description\"\r\n            value={formData.description}\r\n            onChange={handleChange}\r\n            margin=\"normal\"\r\n            multiline\r\n            rows={4}\r\n            required\r\n          />\r\n          <TextField\r\n            fullWidth\r\n            label=\"السعر\"\r\n            name=\"price\"\r\n            type=\"number\"\r\n            value={formData.price}\r\n            onChange={handleChange}\r\n            margin=\"normal\"\r\n            required\r\n          />\r\n          <FormControl fullWidth margin=\"normal\">\r\n            <InputLabel>التصنيف</InputLabel>\r\n            <Select\r\n              name=\"category\"\r\n              value={formData.category}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <MenuItem value=\"educational\">تعليمي</MenuItem>\r\n              <MenuItem value=\"historical\">تاريخي</MenuItem>\r\n              <MenuItem value=\"cultural\">ثقافي</MenuItem>\r\n              <MenuItem value=\"novel\">رواية</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <Box sx={{ mt: 2 }}>\r\n            <input\r\n              accept=\"application/pdf\"\r\n              type=\"file\"\r\n              name=\"pdf\"\r\n              onChange={handleFileChange}\r\n              required\r\n            />\r\n          </Box>\r\n          <Box sx={{ mt: 2 }}>\r\n            <input\r\n              accept=\"image/*\"\r\n              type=\"file\"\r\n              name=\"cover\"\r\n              onChange={handleFileChange}\r\n              required\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={onClose}>إلغاء</Button>\r\n          <Button type=\"submit\" variant=\"contained\">\r\n            رفع الكتاب\r\n          </Button>\r\n        </DialogActions>\r\n      </form>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default AddBookForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}