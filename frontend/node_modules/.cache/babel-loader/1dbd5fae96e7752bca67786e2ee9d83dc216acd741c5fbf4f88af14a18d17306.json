{"ast":null,"code":"import _objectSpread from\"C:/Users/Omar/Desktop/hgfjhgblknm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{TextField,Button,Paper,Typography,Box,FormControl,InputLabel,Select,MenuItem}from'@mui/material';import{useNavigate}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Register=()=>{const[formData,setFormData]=useState({email:'',password:'',confirmPassword:'',username:'',role:'reader',phoneNumber:'',phoneArea:'',bookTypes:[]});const[error,setError]=useState('');const navigate=useNavigate();const{register}=useAuth();const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();if(formData.password!==formData.confirmPassword){setError('كلمات المرور غير متطابقة');return;}try{await register(formData);navigate('/login');}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'حدث خطأ في إنشاء الحساب');}};return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',mt:8},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:4,maxWidth:500,width:'100%'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h1\",gutterBottom:true,align:\"center\",children:\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u062D\\u0633\\u0627\\u0628 \\u062C\\u062F\\u064A\\u062F\"}),error&&/*#__PURE__*/_jsx(Typography,{color:\"error\",gutterBottom:true,children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"\\u0627\\u0644\\u0628\\u0631\\u064A\\u062F \\u0627\\u0644\\u0625\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A\",name:\"email\",type:\"email\",value:formData.email,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\",name:\"username\",value:formData.username,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",name:\"password\",type:\"password\",value:formData.password,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"\\u062A\\u0623\\u0643\\u064A\\u062F \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",name:\"confirmPassword\",type:\"password\",value:formData.confirmPassword,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsxs(Select,{name:\"role\",value:formData.role,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"reader\",children:\"\\u0642\\u0627\\u0631\\u0626\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"author\",children:\"\\u0643\\u0627\\u062A\\u0628\"})]})]}),formData.role==='author'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641\",name:\"phoneNumber\",value:formData.phoneNumber,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"bookTypes-label\",children:\"\\u0623\\u0646\\u0648\\u0627\\u0639 \\u0627\\u0644\\u0643\\u062A\\u0628\"}),/*#__PURE__*/_jsxs(Select,{labelId:\"bookTypes-label\",name:\"bookTypes\",multiple:true,value:formData.bookTypes,onChange:handleChange,label:\"\\u0623\\u0646\\u0648\\u0627\\u0639 \\u0627\\u0644\\u0643\\u062A\\u0628\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"educational\",children:\"\\u062A\\u0639\\u0644\\u064A\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"historical\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E\\u064A\\u0629\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"cultural\",children:\"\\u062B\\u0642\\u0627\\u0641\\u064A\\u0629\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"novel\",children:\"\\u0631\\u0648\\u0627\\u0626\\u064A\\u0629\"})]})]})]}),/*#__PURE__*/_jsx(Button,{fullWidth:true,type:\"submit\",variant:\"contained\",sx:{mt:3},children:\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u062D\\u0633\\u0627\\u0628\"})]})]})});};export default Register;","map":{"version":3,"names":["React","useState","TextField","Button","Paper","Typography","Box","FormControl","InputLabel","Select","MenuItem","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","formData","setFormData","email","password","confirmPassword","username","role","phoneNumber","phoneArea","bookTypes","error","setError","navigate","register","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","_error$response","_error$response$data","response","data","message","sx","display","justifyContent","mt","children","p","maxWidth","width","variant","component","gutterBottom","align","color","onSubmit","fullWidth","label","type","onChange","margin","required","id","labelId","multiple"],"sources":["C:/Users/Omar/Desktop/hgfjhgblknm/frontend/src/components/Auth/Register.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { TextField, Button, Paper, Typography, Box, FormControl, InputLabel, Select, MenuItem } from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst Register = () => {\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    username: '',\r\n    role: 'reader',\r\n    phoneNumber: '',\r\n    phoneArea: '',\r\n    bookTypes: []\r\n  });\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n  const { register } = useAuth();\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (formData.password !== formData.confirmPassword) {\r\n      setError('كلمات المرور غير متطابقة');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await register(formData);\r\n      navigate('/login');\r\n    } catch (error) {\r\n      setError(error.response?.data?.message || 'حدث خطأ في إنشاء الحساب');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', justifyContent: 'center', mt: 8 }}>\r\n      <Paper sx={{ p: 4, maxWidth: 500, width: '100%' }}>\r\n        <Typography variant=\"h5\" component=\"h1\" gutterBottom align=\"center\">\r\n          إنشاء حساب جديد\r\n        </Typography>\r\n        {error && (\r\n          <Typography color=\"error\" gutterBottom>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n        <form onSubmit={handleSubmit}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"البريد الإلكتروني\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            value={formData.email}\r\n            onChange={handleChange}\r\n            margin=\"normal\"\r\n            required\r\n          />\r\n          <TextField\r\n            fullWidth\r\n            label=\"اسم المستخدم\"\r\n            name=\"username\"\r\n            value={formData.username}\r\n            onChange={handleChange}\r\n            margin=\"normal\"\r\n            required\r\n          />\r\n          <TextField\r\n            fullWidth\r\n            label=\"كلمة المرور\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            margin=\"normal\"\r\n            required\r\n          />\r\n          <TextField\r\n            fullWidth\r\n            label=\"تأكيد كلمة المرور\"\r\n            name=\"confirmPassword\"\r\n            type=\"password\"\r\n            value={formData.confirmPassword}\r\n            onChange={handleChange}\r\n            margin=\"normal\"\r\n            required\r\n          />\r\n          <FormControl fullWidth margin=\"normal\">\r\n            <InputLabel>نوع الحساب</InputLabel>\r\n            <Select\r\n              name=\"role\"\r\n              value={formData.role}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <MenuItem value=\"reader\">قارئ</MenuItem>\r\n              <MenuItem value=\"author\">كاتب</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n\r\n          {formData.role === 'author' && (\r\n            <>\r\n              <TextField\r\n                fullWidth\r\n                label=\"رقم الهاتف\"\r\n                name=\"phoneNumber\"\r\n                value={formData.phoneNumber}\r\n                onChange={handleChange}\r\n                margin=\"normal\"\r\n                required\r\n              />\r\n              <FormControl fullWidth margin=\"normal\">\r\n                <InputLabel id=\"bookTypes-label\">أنواع الكتب</InputLabel>\r\n                <Select\r\n                  labelId=\"bookTypes-label\"\r\n                  name=\"bookTypes\"\r\n                  multiple\r\n                  value={formData.bookTypes}\r\n                  onChange={handleChange}\r\n                  label=\"أنواع الكتب\"\r\n                >\r\n                  <MenuItem value=\"educational\">تعليمية</MenuItem>\r\n                  <MenuItem value=\"historical\">تاريخية</MenuItem>\r\n                  <MenuItem value=\"cultural\">ثقافية</MenuItem>\r\n                  <MenuItem value=\"novel\">روائية</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </>\r\n          )}\r\n\r\n          <Button\r\n            fullWidth\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            sx={{ mt: 3 }}\r\n          >\r\n            إنشاء حساب\r\n          </Button>\r\n        </form>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Register; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}